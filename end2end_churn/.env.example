# Customer Churn Prediction - Environment Configuration
# Copy this file to .env and customize values for your environment
# 
# NOTE: .env is gitignored and should never be committed
# This .env.example serves as documentation and a template

# =============================================================================
# Docker User Configuration (File Permissions)
# =============================================================================

# User ID and Group ID for Docker containers
# This prevents permission issues with files created by Docker
# Default: 1000:1000 (typical for first user on Linux)
# 
# If you get "permission denied" errors on generated files, set these:
# UID=1000
# GID=1000
#
# To find your UID/GID: run `id` in terminal
# Or add to .env automatically: 
#   echo "UID=$(id -u)" >> .env
#   echo "GID=$(id -g)" >> .env

# =============================================================================
# Service Configuration
# =============================================================================

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Authentication token for API (leave empty to disable authentication)
# To enable: Generate a secure token with: openssl rand -hex 32
SERVICE_TOKEN=

# Request limits
MAX_BATCH_SIZE=1000           # Maximum customers per prediction batch
MAX_REQUEST_SIZE_MB=10        # Maximum HTTP request size in MB

# =============================================================================
# Drift Detection Configuration
# =============================================================================

# Maximum customers to analyze for drift in a single request
MAX_DRIFT_BATCH_SIZE=500

# Drift thresholds (higher value = less sensitive to drift)
DRIFT_THRESHOLD_NUMERIC=0.2         # Numeric drift threshold (20% change in mean/std)
DRIFT_THRESHOLD_CATEGORICAL=0.25    # Categorical drift threshold (PSI >= 0.25 indicates drift)
DRIFT_THRESHOLD_PREDICTION=0.1      # Prediction drift threshold (10% change in churn rate)

# Automatic retraining
AUTO_RETRAIN_ON_DRIFT=false         # Set to 'true' to enable automatic retraining on drift
MIN_RETRAIN_INTERVAL_HOURS=24       # Minimum hours between retraining attempts

# =============================================================================
# Model Registry Configuration
# =============================================================================

# Model source: 'local' (load from file) or 'registry' (load from MLflow Registry)
MODEL_SOURCE=local

# Model stage to load from registry (only used when MODEL_SOURCE=registry)
# Options: Production, Staging, Archived
MODEL_STAGE=Production

# Registered model name in MLflow Registry
MODEL_NAME=churn_prediction_model

# =============================================================================
# Monitoring Configuration
# =============================================================================

# Grafana admin password
# IMPORTANT: Change this in production!
GRAFANA_PASSWORD=admin

# =============================================================================
# Usage Instructions
# =============================================================================
#
# 1. Copy this file to create your own .env:
#    cp .env.example .env
#
# 2. (Optional) Edit .env with your custom values
#    Note: The defaults above work out-of-the-box
#
# 3. Start services:
#    make up              # API only
#    make up-monitoring   # API + Prometheus + Grafana
#
# 4. The .env file is gitignored and will never be committed
#
# =============================================================================
# Notes
# =============================================================================
#
# - All values have sensible defaults in docker-compose.yml
# - You don't NEED to create .env - the system works without it
# - .env is only for customization (changing log levels, enabling auth, etc.)
# - Never commit .env to version control (it may contain secrets)
#
